//v2.0.9

//define the library
var library = [
    [ //teacher 1 Vocab Final Exam (2025)
        //title of question set
        ["Vocab final exam (2025)"],
        //subject of question set
        ["English"],
        //name of class for question set
        ["English"],
        //name of the teacher for the question set
        ["teacher 1"],
        //what the question set is studying for
        ["Quiz"],
        //The questions
        ["Adulation", "Anachronistic", "Antagonize", "Assert", "Befall", "Burgeon", "Complement", "Correlate", "Cumbersome", "Demean", "Devoid", "Diffuse", "Eminent", "Engross", "Exploit", "Facilitate", "Feign", "Fleeting", "Impervious"],
        //the answers
        ["excessive flattery", "belonging to a period other than that being portrayed", "cause someone to become hostile", "state a fact", "having something bad happen to someone", "begin to growth rapidly", "a thing that completes or brings to perfection", "having mutual relationship or connection", "large, heavy, or difficult", "cause severe loss of dignity", "entirely lacking, empty", "spread over a wide area", "famous or respected within a specific sphere", "absorb all the attention or interest", "make full use of", "make an action easy or easier", "pretend to be affected by", "lasting for a very short time", "not allowing fluid to pass through"],
        //the amount of answer options for individual quesitions
        //(Don't remove it or leave blank, it will not generate answer options if you do)
        //(it currently is just a check. I will add functionality that uses this in a later version)
        [4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4]   
    ], [ //teacher 2  Math Final Exam (2025)
        //title of question set
        ["teacher 2 Math Final Exam (2025)"],
        //subject of question set
        ["Math"],
        //name of class for question set
        ["Addition and subtraction"],
        //name of the teacher for the question set
        ["teacher 2"],
        //what the question set is studying for
        ["Exam"],
        //The questions
        ["1 + 1 = ?", "1 - 1 = ?", "1 - 9 + 43 = ?", "7 + 5,652,733 = ?"],
        //the answers
        ["2", "0", "35", "5,652,740"],
        //the amount of answer options for individual quesitions
        //(Don't remove it or leave blank, it will not generate answer options if you do)
        //(it currently is just a check. I will add functionality that uses this in a later version)
        [4, 4, 4, 4]   
    ], [ //Final(2025)
        //title of question set
        ["History Final Part 1 (2025)"],
        //subject of question set
        ["History"],
        //name of class for question set
        ["Honors"],
        //name of the teacher for the question set
        ["Teacher 3"],
        //what the question set is studying for
        ["Exam"],
        //The questions
        ["What is the name of the first civilization to use writing?", "What is the name of the first empire to control a large area of land?", "What is the name of the first empire to control a large area of sea?", "What is the name of the first empire to control a large area of air?"],
        //the answers
        ["the Sumerians", "Akkadian Empire", "Akkadian Empire again", "Akkadian Empire for the 3rd time"],
        //the amount of answer options for individual quesitions
        //(Don't remove it or leave blank, it will not generate answer options if you do)
        //(it currently is just a check. I will add functionality that uses this in a later version)
        [4, 4, 4, 4]   
    ], [ //teacher 1 Vocab Final Exam Part 2 (2025)
        //title of question set
        ["teacher 1 Vocab Final Exam Part 2 (2025)"],
        //subject of question set
        ["English"],
        //name of class for question set
        ["English"],
        //name of the teacher for the question set
        ["teacher 1"],
        //what the question set is studying for
        ["Quiz"],
        //The questions
        ["Adulation", "Anachronistic", "Antagonize", "Assert", "Befall", "Burgeon", "Complement", "Correlate", "Cumbersome", "Demean", "Devoid", "Diffuse", "Eminent", "Engross", "Exploit", "Facilitate", "Feign", "Fleeting", "Impervious"],
        //the answers
        ["excessive flattery", "belonging to a period other than that being portrayed", "cause someone to become hostile", "state a fact", "having something bad happen to someone", "begin to growth rapidly", "a thing that completes or brings to perfection", "having mutual relationship or connection", "large, heavy, or difficult", "cause severe loss of dignity", "entirely lacking, empty", "spread over a wide area", "famous or respected within a specific sphere", "absorb all the attention or interest", "make full use of", "make an action easy or easier", "pretend to be affected by", "lasting for a very short time", "not allowing fluid to pass through"],
        //the amount of answer options for individual quesitions
        //(Don't remove it or leave blank, it will not generate answer options if you do)
        //(it currently is just a check. I will add functionality that uses this in a later version)
        [4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4, 4]   
    ], [ //teacher 2 Final Exam (2025)
        //title of question set
        ["teacher 2 Math Final Exam Part 2 (2025)"],
        //subject of question set
        ["Math"],
        //name of class for question set
        ["Multiplication and Division"],
        //name of the teacher for the question set
        ["Teacher 2"],
        //what the question set is studying for
        ["Exam"],
        //The questions
        ["5 * 73 = ?", "73 / 5 = ?", "9374 * 29859 / 34852", "123 / 8734 * 782723 / 923 * 984"],
        //the answers
        ["365", "14.6", "8031.05319637", "123 / 8734 * 782723 / 923 * 984"],
        //the amount of answer options for individual quesitions
        //(Don't remove it or leave blank, it will not generate answer options if you do)
        //(it currently is just a check. I will add functionality that uses this in a later version)
        [4, 4, 4, 4]   
    ], [ //Final(2025)
        //title of question set
        ["History Final Part 2(2025)"],
        //subject of question set
        ["History"],
        //name of class for question set
        ["History"],
        //name of the teacher for the question set
        ["Teacher 3"],
        //what the question set is studying for
        ["Exam"],
        //The questions
        ["What is the name of the first man to walk on the moon?", "What is the name of the first country to abolish slavery?", "What is the name of the first country to have a written constitution?", "What is the name of the first country to have a parliament?"],
        //the answers
        ["Neil Armstrong", "France", "San Marino", "Iceland"],
        //the amount of answer options for individual quesitions
        //(Don't remove it or leave blank, it will not generate answer options if you do)
        //(it currently is just a check. I will add functionality that uses this in a later version)
        [4, 4, 4, 4]   
    ]
];

//lists for the questions with placeholder values
var questions = [];
var answers = [];
//create a variable list with a placeholder value
//for the amount of options for individual questions
//(Don't remove it will not generate answer options if you do)
//(it currently is just a check. I will add functionality using this in a later version)
var optionAmounts = [1];
//lists for the queue of remaining questions and answers
var questionQueue = [""];
var answerQueue = [""];
//define where elements are.
const optionLocs = [document.getElementById("option1"), document.getElementById("option2"), document.getElementById("option3"), document.getElementById("option4")];
const questionLoc = document.getElementById("question");
const viewport = document.getElementById("viewport");
const questionTopBar = document.getElementById("questionTopBar");
const questionScreen = document.getElementById("questionScreen");
const resultsScreen = document.getElementById("resultsScreen");
const libraryScreen = document.getElementById("libraryScreen");
const congratsLoc = document.getElementById("congrats");
const gradeLoc = document.getElementById("grade");
const numberCorrectLoc = document.getElementById("numberCorrect");
const restartLoc = document.getElementById("restart");
const toLibraryLoc = document.getElementById("toLibrary");
//create the variable for which question is active
var questionNumber = 0;
//create the variable for how many answers are correct
var numCorrect = 0;
//used to keep track of what the current question set is
var currentQuestionSet = 0;

window.onload = libraryScreenFunc();

//the initialization function that runs for prepping a question set.
function initialize(what) {
    //set the questions set's variables
    questions = library[what][5];
    answers = library[what][6];
    optionAmounts = library[what][7];
    //lists for the queue of remaining questions and answers
    questionQueue = questions;
    answerQueue = answers;
    //library screen fades out via opacity
    libraryScreen.setAttribute("style", "transition: 0.5s; opacity: 0");
    //once faded-out, the library screen gets hidden
    setTimeout(() => {
        libraryScreen.setAttribute("hidden", "true");
    }, 500)
    //set the question screen opacity to 0
    questionScreen.setAttribute("style", "transition: 0s; opacity: 0;");
    //unhide the question screen
    questionScreen.removeAttribute("hidden");
    //fade-in the question screen via opacity
    questionScreen.setAttribute("style", "transition: 0.5s; opacity: 100");
    //generate a question
    questionNumber = 0;
    numCorrect = 0;
    currentQuestionSet = what;
    newQuestion();
}

//the function that runs to generate the library
function libraryScreenFunc() {
    document.body.removeAttribute("style");
    libraryScreen.innerHTML = "";
    //set the library screen opacity to 0
    libraryScreen.setAttribute("style", "transition: 0s; opacity: 0");
    //unhide the library screen
    libraryScreen.removeAttribute("hidden");
    //fade-in the library screen;
    libraryScreen.setAttribute("style", "transition: 0.5s; opacity: 100");
    //set the temporary variable that determines which side items go on
    let side = "left";
    //create the elements from the library list
    for (i = 0; i < library.length; i++) {
        //define the elements for the item and it's contents
        let item = document.createElement("div");
        let title = document.createElement("p");
        let category = document.createElement("p");
        let teacher = document.createElement("p");
        let type = document.createElement("p");
        //set the item's id
        item.setAttribute("id", "item");
        //set the item's class (which side it goes on, the type, and category)
        item.setAttribute("class", /*side + " " +*/ library[i][4] + " " + library[i][1]);
        //set the function to run when the item box is clicked
        item.setAttribute("onclick", "initialize(" + i + ")");
        //set the elements' classes
        title.setAttribute("class", "title");
        category.setAttribute("class", "category");
        teacher.setAttribute("class", "teacher");
        type.setAttribute("class", "type");
        //set the elements' text
        title.innerText = library[i][0];
        category.innerText = library[i][2];
        teacher.innerText = library[i][3];
        type.innerText = library[i][4];
        //set the function to run when the item box is clicked
        title.setAttribute("onclick", "initialize(" + i + ")");
        category.setAttribute("onclick", "initialize(" + i + ")");
        teacher.setAttribute("onclick", "initialize(" + i + ")");
        type.setAttribute("onclick", "initialize(" + i + ")");
        //append the elements to the item element
        item.appendChild(title);
        item.appendChild(category);
        item.appendChild(teacher);
        item.appendChild(type);
        //append the item element to the left side
        //document.getElementById(side).appendChild(item);
        // //toggle the side variable
        if (side == "left") {
            side = "right";
        } else {
            side = "left";
        }
        libraryScreen.appendChild(item);
    }
}

//easy-to-use random number generator
function getRandomInt(min, max) {
    return Math.floor(Math.random() * (max - min)) + min
}

//function that runs when answered incorrectly
function incorrect(selected,umAkchuly) {
    //remove the onclick attribute once answered
    //to prevent clicking before the next question loads with a new correct answer
    //remove it to cheat, by skipping questions (might break stuff if you try it though)
    //not saying that I'd advise that nor is it the intended function
    optionLocs[0].removeAttribute("onclick");
    optionLocs[1].removeAttribute("onclick");
    optionLocs[2].removeAttribute("onclick");
    optionLocs[3].removeAttribute("onclick");
    //set the cursor to not be a pointer
    //so the user doesn't know that the other answer options are still there
    optionLocs[0].setAttribute("style", "cursor:default");
    optionLocs[1].setAttribute("style", "cursor:default");
    optionLocs[2].setAttribute("style", "cursor:default");
    optionLocs[3].setAttribute("style", "cursor:default");
    //fade elements the screen to red
    viewport.setAttribute("style", "background-color:  #fc433d");
    questionTopBar.setAttribute("style", "background-color:  #b53847; color: #fad7d8;");
    document.body.setAttribute("style", "background-color: #fc433d");
    questionLoc.setAttribute("style", "color:  #61181a");
    //fade the picked option to black with red text, to indicate the user's incorrect answer
    optionLocs[selected - 1].setAttribute("style", "background-color: black; color: #fc433d;");
    //fade the correct answer to white with red text, to indicate the correct answer
    optionLocs[umAkchuly - 1].setAttribute("style", "background-color: white; color: #fc433d;");
    //define how many options need to change
    let amountOfOptions = optionAmounts[questionNumber];
    //for each option, if the selected option is not that one
    //fade the color to red, so it is not visible against the background
    if (selected != 1 && umAkchuly != 1 /* && amountOfOptions >= 1 */) {
        optionLocs[0].setAttribute("style", "background-color: #fc433d; color: #fc433d;");
    }
    if (selected != 2 && umAkchuly != 2 /* && amountOfOptions >= 2 */) {
        optionLocs[1].setAttribute("style", "background-color: #fc433d; color: #fc433d;");
    }
    if (selected != 3 && umAkchuly != 3 /* && amountOfOptions >= 3 */) {
        optionLocs[2].setAttribute("style", "background-color: #fc433d; color: #fc433d;");
    }
    if (selected != 4 && umAkchuly != 4 /* && amountOfOptions >= 4 */) {
        optionLocs[3].setAttribute("style", "background-color: #fc433d; color: #fc433d;");
    }
    //after 1.5 seconds, generate a new question
    setTimeout(() => {
        newQuestion();
    }, 1500);
}

//the function that runs when a question is answered correctly
function correct(selected) {
    //remove the onclick attribute once answered
    //to prevent clicking before the next question loads with a new correct answer
    //remove it to cheat, by skipping questions (might break stuff if you try it though)
    //not saying that I'd advise that nor is it the intended function
    optionLocs[0].removeAttribute("onclick");
    optionLocs[1].removeAttribute("onclick");
    optionLocs[2].removeAttribute("onclick");
    optionLocs[3].removeAttribute("onclick");
    //set the cursor to not be a pointer
    //so the user doesn't know that the answer options are still there
    optionLocs[0].setAttribute("style", "cursor:default");
    optionLocs[1].setAttribute("style", "cursor:default");
    optionLocs[2].setAttribute("style", "cursor:default");
    optionLocs[3].setAttribute("style", "cursor:default");
    //fade elements the screen to green
    viewport.setAttribute("style", "background-color:  #90fc88");
    questionTopBar.setAttribute("style", "background-color:  #41b538; color: #d9fad7;");
    document.body.setAttribute("style", "background-color: #90fc88");
    questionLoc.setAttribute("style", "color:  #1d6118");
    //fade the selected answer to white with green text, to indicate it's the correct answer
    optionLocs[selected - 1].setAttribute("style", "background-color: white; color: #1d6118");
    //define how many options need to change
    let amountOfOptions = optionAmounts[questionNumber - 1];
    //for each option, if it's not the selected one,
    //fade the color to green, so it's invisible against the background
    if (selected != 1 /* && amountOfOptions >= 1 */) {
        optionLocs[0].setAttribute("style", "background-color: #90fc88; color: #90fc88;");
    }
    if (selected != 2 /* && amountOfOptions >= 2 */) {
        optionLocs[1].setAttribute("style", "background-color: #90fc88; color: #90fc88;");
    }
    if (selected != 3 /* && amountOfOptions >= 3 */) {
        optionLocs[2].setAttribute("style", "background-color: #90fc88; color: #90fc88;");
    }
    if (selected != 4 /* && amountOfOptions >= 4 */) {
        optionLocs[3].setAttribute("style", "background-color: #90fc88; color: #90fc88;");
    }
    //increment the number of questions answered correctly
    numCorrect++;
    //after 1 second, generate a new question
    setTimeout(() => {
        newQuestion();
    }, 1000);
}

//the function that runs to reset the styling of the page
function resetStyling () {
    //remove the style attribute of everything that should've been modified since last time this function ran
    viewport.removeAttribute("style");
    questionTopBar.removeAttribute("style");
    document.body.removeAttribute("style");
    questionLoc.removeAttribute("style");
    optionLocs[0].removeAttribute("style");
    optionLocs[1].removeAttribute("style");
    optionLocs[2].removeAttribute("style");
    optionLocs[3].removeAttribute("style");
}

//the function that runs when the user finishes
function completed() {
    //define the styling used many times by this function
    let fullOpacityStyle = "opacity: 100; transition: 0.5s;";
    let noOpacityStyle = "opacity: 0; transition: 0.5s";
    //fade-out the question screen using opacity with a transition of 0.75 seconds
    gradeLoc.removeAttribute("style");
    restartLoc.removeAttribute("style");
    numberCorrectLoc.removeAttribute("style");
    toLibraryLoc.removeAttribute("style");
    questionScreen.setAttribute("style", "opacity:0;transition: 0.75s");
    //after 0.5 seconds...
    setTimeout(() => {
        //reset the styling
        resetStyling();
        //hide the question screen
        questionScreen.setAttribute("hidden", true);
        //unhide the results screen
        resultsScreen.removeAttribute("hidden");
        //fade-in the congradulation message
        congratsLoc.setAttribute("style", fullOpacityStyle);
    }, 500);
    //after 2 seconds...
    setTimeout(() => {
        //fade-out the congradulations message
        congratsLoc.setAttribute("style", noOpacityStyle);
        //hide the congradulations message
        congratsLoc.setAttribute("hidden", "true");
        //set the text for the element that shows the grade
        gradeLoc.innerText = (Math.round((100 * (numCorrect / questions.length)))) + "%";
        //set the text for the element that shows how many were answered correctly
        numberCorrectLoc.innerText = (numCorrect + "/" + questions.length);
        //fade-in the grade element
        gradeLoc.setAttribute("style", fullOpacityStyle);
        //fade-in the element that shows how many were answered correctly
        numberCorrectLoc.setAttribute("style", fullOpacityStyle);
    }, 2000);
    //after 3 seconds... 
    setTimeout(() => {
        //fade-in the library button
        toLibraryLoc.setAttribute("style", "opacity: 100; transition: 0.5s; margin-top: 1vh;");
        //fade-in the restart button
        restartLoc.setAttribute("style", fullOpacityStyle);
        //move the grade and number correct elements upwards to keep it centered
        gradeLoc.setAttribute("style", "opacity: 100; transition: 0.5s; margin-top: -27vh;")
    }, 3000);
}

//function that generates a new question
function newQuestion() {
    //increment the question number counter
    questionNumber++;
    //if the counter indicates a value greater than the amount of questions, run the completed() function
    if (questionNumber > questions.length) {
        completed();
    } else { //otherwise...
        //reset the styling
        resetStyling();
        document.body.setAttribute("style", "height: 100vh; overflow: hidden !important;");
        //define how many options need to be changed
        //let amountOfOptions = optionAmounts[questionNumber];
        //set the indicator for what the current question number is
        document.getElementById("qNum").innerText = questionNumber;
        //set the indicator for the total number of questions
        document.getElementById("tQuest").innerText = questions.length;
        //pick a random question
        let picked = getRandomInt(1,questionQueue.length - 1);
        //set the question text
        questionLoc.innerHTML = questionQueue[picked];
        //pick a random option box for the correct answer
        let correct = (getRandomInt(1,4));
        //set the text for the correct answer
        optionLocs[correct - 1].innerHTML = answerQueue[picked];
        optionLocs[correct - 1].setAttribute("onclick", "correct(" + correct + ")");
        //remove the used answer from the queue
        //create a temporary list of incorrect answers 
        let incorrectAnswers = answers.filter(item => item !== answerQueue[picked]);
        //remove the correct answer from the queue of answers
        answerQueue = answerQueue.filter(item => item !== answerQueue[picked]);
        //remove the question from the queue of questions
        questionQueue = questionQueue.filter(item => item !== questionQueue[picked]);
        //if the correct answer is not option 1...
        if (correct != 1 /* && amountOfOptions >= 1 */) {
            //pick a random answer from the incorrect answers list
            let pickedForOption1 = getRandomInt(1,incorrectAnswers.length - 1);
            //set the text of the option to the incorrect answer that was picked
            optionLocs[0].innerHTML = incorrectAnswers[pickedForOption1];
            //set the incorrect function to run if the option is clicked
            //passing through the selected option and the actual answer
            optionLocs[0].setAttribute("onclick", "incorrect(1," + correct + ")");
            //remove the used incorrect answer from the list of incorrect answers
            incorrectAnswers = incorrectAnswers.filter(item => item !== incorrectAnswers[pickedForOption1]);
        } else {
            //otherwise, hide... I have no idea what this is here for
            //I don't remember (my memory terrible) and I am afraid to remove it
            optionLocs[0].setAttribute("hidden", "true");
        }
        if (correct != 2 /* && amountOfOptions >= 2 */) {
            //pick a random answer from the incorrect answers list
            let pickedForOption2 = getRandomInt(1,incorrectAnswers.length - 1)
            //set the text of the option to the incorrect answer that was picked
            optionLocs[1].innerHTML = incorrectAnswers[pickedForOption2];
            //set the incorrect function to run if the option is clicked
            //passing through the selected option and the actual answer
            optionLocs[1].setAttribute("onclick", "incorrect(2," + correct + ")");
            //remove the used incorrect answer from the list of incorrect answers
            incorrectAnswers = incorrectAnswers.filter(item => item !== incorrectAnswers[pickedForOption2]);
        } else {
            //otherwise, hide... I have no idea what this is here for
            //I don't remember (my memory terrible) and I am afraid to remove it
            optionLocs[1].setAttribute("hidden", "true");
        }
        if (correct != 3 /* && amountOfOptions >= 3 */) {
            //pick a random answer from the incorrect answers list
            let pickedForOption3 = getRandomInt(1,incorrectAnswers.length - 1)
            //set the text of the option to the incorrect answer that was picked
            optionLocs[2].innerHTML = incorrectAnswers[pickedForOption3];
            //set the incorrect function to run if the option is clicked
            //passing through the selected option and the actual answer
            optionLocs[2].setAttribute("onclick", "incorrect(3," + correct + ")");
            //remove the used incorrect answer from the list of incorrect answers
            incorrectAnswers = incorrectAnswers.filter(item => item !== incorrectAnswers[pickedForOption3]);
        } else {
            //otherwise, hide... I have no idea what this is here for
            //I don't remember (my memory terrible) and I am afraid to remove it
            optionLocs[2].setAttribute("hidden", "true");
        }
        if (correct != 4 /* && amountOfOptions >= 4 */) {
            //pick a random answer from the incorrect answers list
            let pickedForOption4 = getRandomInt(1,incorrectAnswers.length - 1)
            //set the text of the option to the incorrect answer that was picked
            optionLocs[3].innerHTML = incorrectAnswers[pickedForOption4];
            //set the incorrect function to run if the option is clicked
            //passing through the selected option and the actual answer
            optionLocs[3].setAttribute("onclick", "incorrect(4," + correct + ")");
            //remove the used incorrect answer from the list of incorrect answers
            incorrectAnswers = incorrectAnswers.filter(item => item !== incorrectAnswers[pickedForOption4]);
        } else {
            //otherwise, hide... I have no idea what this is here for
            //I don't remember (my memory terrible) and I am afraid to remove it
            optionLocs[3].setAttribute("hidden", "true");
        }
    }
}